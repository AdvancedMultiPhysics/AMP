############################################################################
#  Configure tests
############################################################################

# Copy input files
COPY_TEST_FILE( input_Mesh )
COPY_TEST_FILE( input_SiloIO-1 )
COPY_TEST_FILE( input_SiloIO-2 )
COPY_TEST_FILE( input_SiloIO-3 )
COPY_TEST_FILE( input_Crystal )
COPY_TEST_FILE( input_crystal_mesh )
COPY_TEST_FILE( inputMultiPellet348 )
COPY_TEST_FILE( 17x17_denovo_thermal_1x )
COPY_TEST_FILE( input_AMP_mesh_zoo_1D )
COPY_TEST_FILE( input_AMP_mesh_zoo_2D )
COPY_TEST_FILE( input_AMP_mesh_zoo_3D )
COPY_TEST_FILE( input_circle_frustrum )
COPY_TEST_FILE( input_stl )
COPY_TEST_FILE( input_crystal )
COPY_TEST_FILE( CRYSTAL_FINAL_2mm.STL )

# Copy meshes
IF ( AMP_DATA )
    COPY_MESH_FILE( pellet_1x.e )
    COPY_MESH_FILE( clad_1x_1pellet.e )
    COPY_MESH_FILE( clad_1x_2pellet.e )
    COPY_MESH_FILE( clad_1x_3pellet.e )
    COPY_MESH_FILE( cube343H27.e )
    COPY_MESH_FILE( pellet_lo_res.e )
    COPY_MESH_FILE( clad_lo_res_4pellet.e )
    COPY_MESH_FILE( multiElementMesh.e )
    COPY_MESH_FILE( Utah_teapot.stl )
ENDIF()

# test the load balancer
ADD_AMP_TEST( test_LoadBalance 8 inputMultiPellet348 )
IF ( USE_EXT_LIBMESH AND AMP_DATA )
    ADD_AMP_TEST( test_LoadBalance 1 input_Mesh )
    ADD_AMP_TEST( test_LoadBalance 2 input_Mesh )
    ADD_AMP_TEST( test_LoadBalance 4 input_Mesh )
ENDIF()
ADD_AMP_TEST( test_LoadBalance 4 input_crystal_mesh 4.0 )
ADD_AMP_TEST( test_LoadBalance 512 inputMultiPellet348 )
ADD_AMP_TEST( test_LoadBalance 64000 inputMultiPellet348 )

# Add tests
ADD_AMP_TEST( test_GeometryHelpers )
ADD_AMP_TEST_PARALLEL( test_Mesh 4 input_AMP_mesh_zoo_2D )
ADD_AMP_TEST_PARALLEL( test_Mesh 4 input_AMP_mesh_zoo_3D )
IF( USE_EXT_PETSC AND USE_EXT_TRILINOS )
    ADD_AMP_TEST_1_2_4( test_Mesh )
ELSE()
    ADD_AMP_TEST( test_Mesh )
ENDIF()
ADD_AMP_TEST( testMeshPerformance )
IF ( USE_EXT_LIBMESH )
    ADD_AMP_TEST_1_2_4( test_InitializeLibmesh )
ENDIF()
ADD_AMP_TEST_1_2_4( test_StructuredMeshHelpers )
ADD_AMP_TEST( testTriangleProjection )
ADD_AMP_TEST( test_SiloIO input_crystal )
IF ( AMP_DATA )
    ADD_AMP_TEST( test_Mesh input_stl ) # Currently only works on 1 rank
    ADD_AMP_TEST( test_SiloIO input_stl )
ENDIF()
IF ( USE_EXT_LIBMESH AND AMP_DATA )
    ADD_AMP_TEST_1_2_4 ( test_SiloIO input_SiloIO-1 )
ELSE()
    ADD_AMP_TEST_1_2_4 ( test_SiloIO input_SiloIO-2 )
ENDIF()
IF( USE_EXT_DENDRO AND USE_EXT_PETSC )
    ADD_AMP_TEST_1_2_4( testDendroInterpolation )
    COPY_TEST_FILE( input_testDendroInterpolation  )
    ADD_AMP_TEST_PARALLEL( testDendroSearch 4)
ENDIF()
ADD_AMP_TEST_1_2_4( testMultiMeshSubset )
COPY_TEST_FILE( input_testMultiMeshSubset )
ADD_AMP_TEST_1_2_4( testMultiMeshOwnerRank )
COPY_TEST_FILE( input_testMultiMeshOwnerRank )

#ADD_AMP_TEST( testHex8ElementMapping )
#ADD_AMP_TEST( testHex8ElementLinearInterpolation )
#ADD_AMP_TEST( testHex8ElementNormalToFaces )

